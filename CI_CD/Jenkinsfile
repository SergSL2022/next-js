pipeline {
    agent{
        label "netx-serg"
    }

    stages{
        stage("Install"){
            steps{
                sh """
                    pm2 stop next.slipchuk.site
                    cd /home/serg/webapps/next.slipchuk.site
                    git pull
                    npm install
                """
            }
        }
        stage("Build"){
            steps{
                sh """
                    cd /home/serg/webapps/next.slipchuk.site
                    npm run build
                """
            }
        }
        stage("Start"){
            steps{
                sh """
                    pm2 restart next.slipchuk.site
                """
            }
        }
    }
}